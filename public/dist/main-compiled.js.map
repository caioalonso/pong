{"version":3,"sources":["main.js"],"names":["setup","renderer","PIXI","autoDetectRenderer","view","style","position","display","autoResize","resize","window","innerWidth","innerHeight","document","body","appendChild","stage","Container","line","Graphics","lineStyle","moveTo","lineTo","height","x","width","y","addChild","message","message2","centerSpacing","topPadding","WebFont","load","custom","families","active","Text","fontFamily","fontSize","fill","set","rectangle","beginFill","drawRect","endFill","rectangle2","vy","up","keyboard","down","press","release","isDown","info","socket","json","emit","gameLoop","requestAnimationFrame","contain","collision","key","code","keyCode","isUp","undefined","event","downHandler","upHandler","addEventListener","bind","sprite","container","io","on","data","bgtimer","onresize","w"],"mappings":"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","file":"main-compiled.js","sourcesContent":["/* global io PIXI */\n'use strict'\n\nvar socket = io()\nsocket.on('sync', data => {\n  rectangle2.y = data.y\n})\n\nconst Graphics = PIXI.Graphics\nconst Container = PIXI.Container\nconst Text = PIXI.Text\n\nvar renderer, stage, rectangle, rectangle2\n\nvar bgtimer\n\nfunction setup () {\n  renderer = PIXI.autoDetectRenderer(256, 256)\n  renderer.view.style.position = 'absolute'\n  renderer.view.style.display = 'block'\n  renderer.autoResize = true\n  renderer.resize(window.innerWidth, window.innerHeight)\n\n  document.body.appendChild(renderer.view)\n\n  stage = new Container()\n\n  var line = new Graphics()\n  line.lineStyle(4, 0xFFFFFF, 0.2)\n  line.moveTo(0, 0)\n  line.lineTo(0, renderer.height)\n  line.x = renderer.width/2\n  line.y = 0\n  stage.addChild(line)\n\n  var centerSpacing = 60\n  var topPadding = 0\n\n  var message, message2\n  WebFont.load({\n    custom: {\n      families: ['FFF']\n    },\n    active: () => {\n      message = new Text('0', {\n        fontFamily: 'FFF',\n        fontSize: '4vw',\n        fill: 'white'\n      })\n      message.position.set(renderer.width/2 + centerSpacing, topPadding)\n      stage.addChild(message)\n\n      message2 = new Text('0', {\n        fontFamily: 'FFF',\n        fontSize: '4vw',\n        fill: 'white'\n      })\n      message2.position.set(renderer.width/2 - message2.width - centerSpacing, topPadding)\n      stage.addChild(message2)\n    }\n  })\n\n  rectangle = new Graphics()\n  rectangle.beginFill(0xFFFFFF)\n  rectangle.drawRect(0, 0, 20, 200)\n  rectangle.endFill()\n  rectangle.position.set(0, 0)\n  stage.addChild(rectangle)\n\n  rectangle2 = new Graphics()\n  rectangle2.beginFill(0xFFFFFF)\n  rectangle2.drawRect(0, 0, 20, 200)\n  rectangle2.endFill()\n  rectangle2.position.set(renderer.width - rectangle2.width, 0)\n  stage.addChild(rectangle2)\n\n  rectangle.vy = 0\n\n  var up = keyboard(38)\n  var down = keyboard(40)\n\n  up.press = () => rectangle.vy = -7\n\n  up.release = () => {\n    if(!down.isDown) {\n      rectangle.vy = 0\n    }\n  }\n\n  down.press = () => rectangle.vy = 7\n\n  down.release = () => {\n    if(!up.isDown) {\n      rectangle.vy = 0\n    }\n  }\n\n  bgtimer = setInterval(() => {\n    var info = {y: rectangle.y}\n    socket.json.emit('sync', info);\n  }, 50)\n\n  renderer.render(stage)\n  gameLoop()\n}\n\nvar collision\n\nfunction gameLoop () {\n  requestAnimationFrame(gameLoop)\n  contain(rectangle, {x:0, y:0, width: renderer.width, height: renderer.height})\n  rectangle.y += rectangle.vy\n  renderer.render(stage)\n}\n\nsetup()\n\nwindow.onresize = function (event){\n  var w = window.innerWidth\n  var h = window.innerHeight\n  renderer.view.style.width = w + \"px\"\n  renderer.view.style.height = h + \"px\"\n  renderer.resize(w,h)\n}\n\nfunction keyboard(keyCode) {\n  var key = {};\n  key.code = keyCode;\n  key.isDown = false;\n  key.isUp = true;\n  key.press = undefined;\n  key.release = undefined;\n  //The `downHandler`\n  key.downHandler = function(event) {\n    if (event.keyCode === key.code) {\n      if (key.isUp && key.press) key.press();\n      key.isDown = true;\n      key.isUp = false;\n      event.preventDefault();\n    }\n  };\n\n  //The `upHandler`\n  key.upHandler = function(event) {\n    if (event.keyCode === key.code) {\n      if (key.isDown && key.release) key.release();\n      key.isDown = false;\n      key.isUp = true;\n      event.preventDefault();\n    }\n  };\n\n  //Attach event listeners\n  window.addEventListener(\n    \"keydown\", key.downHandler.bind(key), false\n  );\n  window.addEventListener(\n    \"keyup\", key.upHandler.bind(key), false\n  );\n  return key;\n}\n\nfunction contain(sprite, container) {\n  var collision = undefined;\n\n  //Left\n  if (sprite.x < container.x) {\n    sprite.x = container.x;\n    collision = \"left\";\n  }\n\n  //Top\n  if (sprite.y < container.y) {\n    sprite.y = container.y;\n    collision = \"top\";\n  }\n\n  //Right\n  if (sprite.x + sprite.width > container.width) {\n    sprite.x = container.width - sprite.width;\n    collision = \"right\";\n  }\n\n  //Bottom\n  if (sprite.y + sprite.height > container.height) {\n    sprite.y = container.height - sprite.height;\n    collision = \"bottom\";\n  }\n\n  //Return the `collision` value\n  return collision;\n}\n"]}